{% extends 'base.html' %}

{% block content %}

{% for message in get_flashed_messages() %}
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    <strong>{{ message }}</strong>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
{% endfor %}

<h2>Offene Aufträge</h2>

<table class="table mt-5 table-hover">
  <thead>
      <tr>
          <th scope="col"> Datum </th>
          <th scope="col"> Kunde </th>
          <th scope="col"> Schläger </th>
          <th scope="col"> Saite </th>
          <th scope="col"> Längs </th>
          <th scope="col"> Quer </th>
          <th scope="col"> Aktion </th>
      </tr>
  </thead>
  <tbody>
    {% for order in open_orders %}
        <td> {{ order.date_added|format_datetime }} </td>
        <td> {{ order.belongs_to.customer.fullname }} </td>
        <td> {{ order.belongs_to }} </td>
        <td> 
          {% if order.hybrid is true %}
          {{ order.string_main.fullstring }} / {{ order.string_cross.fullstring }}
          {% else %}
          {{ order.string_main.fullstring }}
          {% endif %}
        </td>
        <td> {{ order.tension_main }} kg </td>
        <td> {{ order.tension_main }} kg </td>
        <td> 
          <div class="btn-group" role="group">
            <button class="btn btn-success"><a href="{{ url_for('updateDone', id=order.id) }}" class="link-light"><i class="bi bi-check-circle"></i></a></button>
            <button type="button" class="btn btn-danger"><i class="bi bi-trash"></i></button>
          </div>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
  
<h2>Abgeschlossene Aufträge</h2>

<table class="table mt-5 table-hover">
  <thead>
      <tr>
          <th scope="col"> Datum </th>
          <th scope="col"> Kunde </th>
          <th scope="col"> Schläger </th>
          <th scope="col"> Saite </th>
          <th scope="col"> Längs </th>
          <th scope="col"> Quer </th>
      </tr>
  </thead>
  <tbody>
    {% for order in orders %}
        <td> {{ order.date_added|format_datetime }} </td>
        <td> {{ order.belongs_to.customer.fullname }} </td>
        <td> {{ order.belongs_to }} </td>
        <td> 
          {% if order.hybrid is true %}
          {{ order.string_main.fullstring }} / {{ order.string_cross.fullstring }}
          {% else %}
          {{ order.string_main.fullstring }}
          {% endif %}
        </td>
        <td> {{ order.tension_main }} kg </td>
        <td> {{ order.tension_main }} kg </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}